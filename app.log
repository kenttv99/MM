2025-03-21 13:27:22,585 - root - ERROR - Error creating event: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $3: datetime.datetime(2025, 3, 21, 10, 26, 2... (can't subtract offset-naive and offset-aware datetimes)
[SQL: INSERT INTO events (title, description, start_date, end_date, location, image_url, price, published, created_at, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::TIMESTAMP WITHOUT TIME ZONE, $4::TIMESTAMP WITHOUT TIME ZONE, $5::VARCHAR, $6::VARCHAR, $7::NUMERIC(20, 8), $8::BOOLEAN, $9::TIMESTAMP WITHOUT TIME ZONE, $10::TIMESTAMP WITHOUT TIME ZONE) RETURNING events.id]
[parameters: ('КИРТАН МЕЛА', 'Киртан мела MM', datetime.datetime(2025, 3, 21, 10, 26, 22, 123000, tzinfo=TzInfo(UTC)), datetime.datetime(2025, 3, 21, 10, 26, 22, 123000, tzinfo=TzInfo(UTC)), 'Куусинена 19а', 'string', 0.0, False, datetime.datetime(2025, 3, 21, 10, 27, 22, 564609), datetime.datetime(2025, 3, 21, 10, 27, 22, 564609))]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-03-22 17:43:39,559 - root - ERROR - Error retrieving events for admin: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: столбец events.status не существует
[SQL: SELECT events.id, events.title, events.description, events.start_date, events.end_date, events.location, events.image_url, events.price, events.published, events.created_at, events.updated_at, events.status 
FROM events]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-03-22 17:44:45,807 - root - ERROR - Error retrieving events for admin: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: столбец events.status не существует
[SQL: SELECT events.id, events.title, events.description, events.start_date, events.end_date, events.location, events.image_url, events.price, events.published, events.created_at, events.updated_at, events.status 
FROM events]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-03-22 17:45:13,426 - root - ERROR - Error retrieving events for admin: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: столбец events.status не существует
[SQL: SELECT events.id, events.title, events.description, events.start_date, events.end_date, events.location, events.image_url, events.price, events.published, events.created_at, events.updated_at, events.status 
FROM events]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-03-22 17:48:31,654 - root - ERROR - Error retrieving events for admin: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: столбец events.status не существует
[SQL: SELECT events.id, events.title, events.description, events.start_date, events.end_date, events.location, events.image_url, events.price, events.published, events.created_at, events.updated_at, events.status 
FROM events]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-03-22 17:48:31,673 - root - ERROR - Error retrieving events for admin: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: столбец events.status не существует
[SQL: SELECT events.id, events.title, events.description, events.start_date, events.end_date, events.location, events.image_url, events.price, events.published, events.created_at, events.updated_at, events.status 
FROM events]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-03-22 17:48:31,690 - root - ERROR - Error retrieving events for admin: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: столбец events.status не существует
[SQL: SELECT events.id, events.title, events.description, events.start_date, events.end_date, events.location, events.image_url, events.price, events.published, events.created_at, events.updated_at, events.status 
FROM events]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-03-22 17:51:11,939 - root - ERROR - Error registering admin: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: INSERT или UPDATE в таблице "user_activities" нарушает ограничение внешнего ключа "user_activities_user_id_fkey"
DETAIL:  Ключ (user_id)=(1) отсутствует в таблице "users".
[SQL: INSERT INTO user_activities (user_id, ip_address, cookies, user_agent, action, created_at, device_fingerprint) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::TIMESTAMP WITHOUT TIME ZONE, $7::VARCHAR) RETURNING user_activities.id]
[parameters: (1, '127.0.0.1', 'next-auth.csrf-token=548735245255ed12a218c7df520c38264b58b9c721d3183cd0067161af2cb00d%7C82fb559a7b01833c42145f5b5a99a2fbd48d471020972ca8f065d1042fefe49c; next-auth.callback-url=http%3A%2F%2Flocalhost%3A3000%2Flogin; __next_hmr_refresh_hash__=131afb9219f9f75ab0c46eac49302c0d633457081244afec', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36', 'register', datetime.datetime(2025, 3, 22, 14, 51, 11, 875139), '4b6dfb1aee88e405a0d3840241264130c0d1b482be184b46bb7df53dc0dc5474')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-22 18:11:40,052 - root - ERROR - Validation error creating event: Could not validate credentials
2025-03-22 18:12:38,493 - root - ERROR - Error creating event: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
2025-03-22 18:18:25,277 - root - ERROR - Error creating event: A transaction is already begun on this Session.
2025-03-22 18:23:02,946 - root - ERROR - Error creating event: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
2025-03-22 18:27:11,302 - root - ERROR - Error creating event: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
2025-03-23 01:36:39,628 - root - ERROR - Error creating event: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $3: datetime.datetime(2025, 3, 22, 0, 0, tzi... (can't subtract offset-naive and offset-aware datetimes)
[SQL: INSERT INTO events (title, description, start_date, end_date, location, image_url, price, published, created_at, updated_at, status) VALUES ($1::VARCHAR, $2::VARCHAR, $3::TIMESTAMP WITHOUT TIME ZONE, $4::TIMESTAMP WITHOUT TIME ZONE, $5::VARCHAR, $6::VARCHAR, $7::NUMERIC(20, 8), $8::BOOLEAN, $9::TIMESTAMP WITHOUT TIME ZONE, $10::TIMESTAMP WITHOUT TIME ZONE, $11::eventstatus) RETURNING events.id]
[parameters: ('Киртан Мела', 'Киртан Мела', datetime.datetime(2025, 3, 22, 0, 0, tzinfo=TzInfo(UTC)), datetime.datetime(2025, 3, 22, 0, 0, tzinfo=TzInfo(UTC)), 'Куусинена, 19а', 'string', 0.0, False, datetime.datetime(2025, 3, 22, 22, 36, 38, 864000, tzinfo=TzInfo(UTC)), datetime.datetime(2025, 3, 22, 22, 36, 38, 864000, tzinfo=TzInfo(UTC)), 'draft')]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-03-24 01:50:40,867 - fastapi - ERROR - Form data requires "python-multipart" to be installed. 
You can install "python-multipart" with: 

pip install python-multipart

2025-03-25 00:50:44,664 - root - ERROR - Error updating event 9: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
2025-03-25 00:51:05,289 - root - ERROR - Error updating event 9: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
2025-03-25 00:54:02,829 - root - ERROR - Error updating event 9: Can't operate on closed transaction inside context manager.  Please complete the context manager before emitting further commands.
2025-03-25 00:56:33,429 - root - ERROR - Error updating event 9: Can't operate on closed transaction inside context manager.  Please complete the context manager before emitting further commands.
2025-03-25 00:57:10,588 - root - ERROR - Error updating event 9: Can't operate on closed transaction inside context manager.  Please complete the context manager before emitting further commands.
2025-03-25 00:58:01,379 - root - ERROR - Error updating event 9: Can't operate on closed transaction inside context manager.  Please complete the context manager before emitting further commands.
2025-03-25 01:02:14,906 - root - ERROR - Error updating event 9: Can't operate on closed transaction inside context manager.  Please complete the context manager before emitting further commands.
2025-03-25 01:07:35,196 - root - ERROR - Error updating event 9: Can't operate on closed transaction inside context manager.  Please complete the context manager before emitting further commands.
2025-03-25 23:59:27,070 - root - ERROR - Error creating event: 422: Количество мест должно быть больше 0
2025-03-26 12:02:59,167 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:02:59,179 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:04:05,785 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:04:05,790 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:05:57,685 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:05:57,690 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:06:15,219 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:06:15,230 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:06:25,548 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:06:25,563 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:06:47,958 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:06:47,961 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:12:07,992 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:12:08,000 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:13:27,494 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:13:27,699 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:15:05,535 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:15:05,540 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:15:08,227 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:15:08,232 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:15:09,913 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:15:09,920 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:15:23,126 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:15:42,007 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:15:42,011 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:15:42,309 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:15:57,543 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:15:57,557 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:16:02,934 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:16:02,936 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:19:46,948 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:19:46,960 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:19:46,964 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:19:49,247 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:19:49,253 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:23:58,694 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:23:58,707 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:24:00,114 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:24:00,120 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:24:00,123 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:41:10,797 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:41:10,802 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:41:17,449 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:41:17,463 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-26 12:41:17,465 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 02:19:03,452 - root - ERROR - Error retrieving events for admin: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedFunctionError'>: оператор не существует: timestamp without time zone >= character varying
HINT:  Оператор с данными именем и типами аргументов не найден. Возможно, вам следует добавить явные приведения типов.
[SQL: SELECT events.id, events.title, events.description, events.start_date, events.end_date, events.location, events.image_url, events.price, events.published, events.created_at, events.updated_at, events.status 
FROM events 
WHERE events.start_date >= $1::VARCHAR]
[parameters: ('2025-03-28',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-03-28 02:19:04,324 - root - ERROR - Error retrieving events for admin: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedFunctionError'>: оператор не существует: timestamp without time zone >= character varying
HINT:  Оператор с данными именем и типами аргументов не найден. Возможно, вам следует добавить явные приведения типов.
[SQL: SELECT events.id, events.title, events.description, events.start_date, events.end_date, events.location, events.image_url, events.price, events.published, events.created_at, events.updated_at, events.status 
FROM events 
WHERE events.start_date >= $1::VARCHAR]
[parameters: ('2025-03-28',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-03-28 02:21:08,598 - root - ERROR - Error retrieving events for admin: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedFunctionError'>: оператор не существует: timestamp without time zone >= character varying
HINT:  Оператор с данными именем и типами аргументов не найден. Возможно, вам следует добавить явные приведения типов.
[SQL: SELECT events.id, events.title, events.description, events.start_date, events.end_date, events.location, events.image_url, events.price, events.published, events.created_at, events.updated_at, events.status 
FROM events 
WHERE events.start_date >= $1::VARCHAR]
[parameters: ('2025-03-28',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-03-28 02:21:09,745 - root - ERROR - Error retrieving events for admin: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedFunctionError'>: оператор не существует: timestamp without time zone >= character varying
HINT:  Оператор с данными именем и типами аргументов не найден. Возможно, вам следует добавить явные приведения типов.
[SQL: SELECT events.id, events.title, events.description, events.start_date, events.end_date, events.location, events.image_url, events.price, events.published, events.created_at, events.updated_at, events.status 
FROM events 
WHERE events.start_date >= $1::VARCHAR]
[parameters: ('2025-03-28',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-03-28 02:24:10,461 - root - ERROR - Error retrieving events for admin: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedFunctionError'>: оператор не существует: timestamp without time zone >= character varying
HINT:  Оператор с данными именем и типами аргументов не найден. Возможно, вам следует добавить явные приведения типов.
[SQL: SELECT events.id, events.title, events.description, events.start_date, events.end_date, events.location, events.image_url, events.price, events.published, events.created_at, events.updated_at, events.status 
FROM events 
WHERE events.start_date >= $1::VARCHAR]
[parameters: ('2025-03-28',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-03-28 02:24:10,639 - root - ERROR - Error retrieving events for admin: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedFunctionError'>: оператор не существует: timestamp without time zone >= character varying
HINT:  Оператор с данными именем и типами аргументов не найден. Возможно, вам следует добавить явные приведения типов.
[SQL: SELECT events.id, events.title, events.description, events.start_date, events.end_date, events.location, events.image_url, events.price, events.published, events.created_at, events.updated_at, events.status 
FROM events 
WHERE events.start_date >= $1::VARCHAR]
[parameters: ('2025-03-28',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-03-28 02:28:48,066 - root - ERROR - Error retrieving events for admin: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedFunctionError'>: оператор не существует: timestamp without time zone >= character varying
HINT:  Оператор с данными именем и типами аргументов не найден. Возможно, вам следует добавить явные приведения типов.
[SQL: SELECT events.id, events.title, events.description, events.start_date, events.end_date, events.location, events.image_url, events.price, events.published, events.created_at, events.updated_at, events.status 
FROM events 
WHERE events.start_date >= $1::VARCHAR]
[parameters: ('2025-03-28',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-03-28 02:28:48,138 - root - ERROR - Error retrieving events for admin: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedFunctionError'>: оператор не существует: timestamp without time zone >= character varying
HINT:  Оператор с данными именем и типами аргументов не найден. Возможно, вам следует добавить явные приведения типов.
[SQL: SELECT events.id, events.title, events.description, events.start_date, events.end_date, events.location, events.image_url, events.price, events.published, events.created_at, events.updated_at, events.status 
FROM events 
WHERE events.start_date >= $1::VARCHAR]
[parameters: ('2025-03-28',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-03-28 14:26:47,104 - root - ERROR - Error logging user activity: 'NoneType' object has no attribute 'headers'
2025-03-28 15:06:45,339 - root - ERROR - Error logging user activity: 'NoneType' object has no attribute 'headers'
2025-03-28 18:57:52,488 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 18:57:57,503 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 19:04:39,903 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 19:04:50,550 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 19:15:09,238 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 19:15:27,888 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 19:21:01,510 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 19:21:15,144 - root - ERROR - Error logging user activity: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.NotNullViolationError'>: значение NULL в столбце "user_id" отношения "user_activities" нарушает ограничение NOT NULL
DETAIL:  Ошибочная строка содержит (609, null, 127.0.0.1, next-auth.csrf-token=548735245255ed12a218c7df520c38264b58b9c721d..., Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KH..., login_failed, 2025-03-28 16:21:14.879442, 95543d9d89de0139e11560d5334ce33f698ac8df0426eb39db8e3a5f51d3c059).
[SQL: INSERT INTO user_activities (user_id, ip_address, cookies, user_agent, action, created_at, device_fingerprint) VALUES ($1::INTEGER, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::TIMESTAMP WITHOUT TIME ZONE, $7::VARCHAR) RETURNING user_activities.id]
[parameters: (None, '127.0.0.1', 'next-auth.csrf-token=548735245255ed12a218c7df520c38264b58b9c721d3183cd0067161af2cb00d%7C82fb559a7b01833c42145f5b5a99a2fbd48d471020972ca8f065d1042fefe49c; next-auth.callback-url=http%3A%2F%2Flocalhost%3A3000%2Flogin; __next_hmr_refresh_hash__=1c256a704a41d372a0cdd42638986b15633457081244afec', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36', 'login_failed', datetime.datetime(2025, 3, 28, 16, 21, 14, 879442), '95543d9d89de0139e11560d5334ce33f698ac8df0426eb39db8e3a5f51d3c059')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-28 19:27:42,929 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 19:27:45,626 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 19:27:46,917 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 20:42:30,797 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 20:42:34,971 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 21:49:25,462 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 21:51:30,733 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 21:57:06,845 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 22:00:54,007 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 22:01:26,514 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 22:03:01,990 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 22:03:05,143 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 22:03:06,248 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 22:03:06,945 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 22:03:07,402 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 22:03:07,877 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 22:03:08,089 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 22:03:08,270 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 22:03:08,527 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 22:18:13,758 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 22:18:17,535 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 22:18:33,641 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 22:18:37,042 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 22:23:50,448 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 22:23:51,864 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 22:23:52,895 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 22:23:53,373 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 22:26:03,898 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 22:26:05,212 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 22:26:05,859 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 22:27:55,280 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 22:33:02,874 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 22:33:04,563 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 22:33:05,076 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 22:34:46,501 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 22:34:47,106 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 22:38:39,850 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 22:38:40,293 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 22:38:45,817 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 22:38:47,294 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 22:38:57,665 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 22:38:57,892 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 22:38:58,837 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 22:39:14,565 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-28 22:39:20,844 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-29 03:23:20,425 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-29 03:42:54,274 - root - ERROR - JWT decode error: Invalid input segments length: 
2025-03-29 03:42:54,376 - root - ERROR - Error in token refresh middleware: Invalid input segments length: 
2025-03-29 04:19:30,763 - root - ERROR - JWT decode error: Invalid input segments length: 
2025-03-29 04:19:30,901 - root - ERROR - Error in token refresh middleware: Invalid input segments length: 
2025-03-29 11:08:39,364 - root - ERROR - JWT decode error: Invalid input segments length: 
2025-03-29 11:08:39,541 - root - ERROR - Error in token refresh middleware: Invalid input segments length: 
2025-03-29 11:09:03,398 - root - ERROR - JWT decode error: Invalid input segments length: 
2025-03-29 11:09:03,403 - root - ERROR - Error in token refresh middleware: Invalid input segments length: 
2025-03-29 14:22:31,873 - asyncio - ERROR - Exception in callback _ProactorReadPipeTransport._loop_reading(<_OverlappedF...d result=1078>)
handle: <Handle _ProactorReadPipeTransport._loop_reading(<_OverlappedF...d result=1078>)>
Traceback (most recent call last):
  File "C:\Users\kentt\AppData\Local\Programs\Python\Python312\Lib\asyncio\events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\kentt\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 325, in _loop_reading
    self._data_received(data, length)
  File "C:\Users\kentt\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 274, in _data_received
    self._protocol.data_received(data)
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 172, in data_received
    self.handle_events()
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 181, in handle_events
    self.send_400_response(msg)
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 298, in send_400_response
    output = self.conn.send(event)
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\h11\_connection.py", line 512, in send
    data_list = self.send_with_data_passthrough(event)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\h11\_connection.py", line 537, in send_with_data_passthrough
    self._process_event(self.our_role, event)
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\h11\_connection.py", line 272, in _process_event
    self._cstate.process_event(role, type(event), server_switch_event)
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\h11\_state.py", line 293, in process_event
    self._fire_event_triggered_transitions(role, _event_type)
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\h11\_state.py", line 311, in _fire_event_triggered_transitions
    raise LocalProtocolError(
h11._util.LocalProtocolError: can't handle event type Response when role=SERVER and state=CLOSED
2025-03-29 23:16:37,017 - root - ERROR - Error retrieving events for admin: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedFunctionError'>: оператор не существует: timestamp without time zone <= character varying
HINT:  Оператор с данными именем и типами аргументов не найден. Возможно, вам следует добавить явные приведения типов.
[SQL: SELECT events.id, events.title, events.description, events.start_date, events.end_date, events.location, events.image_url, events.price, events.published, events.created_at, events.updated_at, events.status 
FROM events 
WHERE events.start_date <= $1::VARCHAR]
[parameters: ('2025-03-29',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-03-30 02:06:14,548 - asyncio - ERROR - Exception in callback _ProactorReadPipeTransport._loop_reading(<_OverlappedF...d result=1078>)
handle: <Handle _ProactorReadPipeTransport._loop_reading(<_OverlappedF...d result=1078>)>
Traceback (most recent call last):
  File "C:\Users\kentt\AppData\Local\Programs\Python\Python312\Lib\asyncio\events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\kentt\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 325, in _loop_reading
    self._data_received(data, length)
  File "C:\Users\kentt\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 274, in _data_received
    self._protocol.data_received(data)
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 172, in data_received
    self.handle_events()
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 181, in handle_events
    self.send_400_response(msg)
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 298, in send_400_response
    output = self.conn.send(event)
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\h11\_connection.py", line 512, in send
    data_list = self.send_with_data_passthrough(event)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\h11\_connection.py", line 537, in send_with_data_passthrough
    self._process_event(self.our_role, event)
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\h11\_connection.py", line 272, in _process_event
    self._cstate.process_event(role, type(event), server_switch_event)
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\h11\_state.py", line 293, in process_event
    self._fire_event_triggered_transitions(role, _event_type)
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\h11\_state.py", line 311, in _fire_event_triggered_transitions
    raise LocalProtocolError(
h11._util.LocalProtocolError: can't handle event type Response when role=SERVER and state=CLOSED
2025-03-30 02:09:26,250 - asyncio - ERROR - Exception in callback _ProactorReadPipeTransport._loop_reading(<_OverlappedF...d result=1078>)
handle: <Handle _ProactorReadPipeTransport._loop_reading(<_OverlappedF...d result=1078>)>
Traceback (most recent call last):
  File "C:\Users\kentt\AppData\Local\Programs\Python\Python312\Lib\asyncio\events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\kentt\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 325, in _loop_reading
    self._data_received(data, length)
  File "C:\Users\kentt\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 274, in _data_received
    self._protocol.data_received(data)
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 172, in data_received
    self.handle_events()
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 181, in handle_events
    self.send_400_response(msg)
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 298, in send_400_response
    output = self.conn.send(event)
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\h11\_connection.py", line 512, in send
    data_list = self.send_with_data_passthrough(event)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\h11\_connection.py", line 537, in send_with_data_passthrough
    self._process_event(self.our_role, event)
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\h11\_connection.py", line 272, in _process_event
    self._cstate.process_event(role, type(event), server_switch_event)
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\h11\_state.py", line 293, in process_event
    self._fire_event_triggered_transitions(role, _event_type)
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\h11\_state.py", line 311, in _fire_event_triggered_transitions
    raise LocalProtocolError(
h11._util.LocalProtocolError: can't handle event type Response when role=SERVER and state=CLOSED
2025-03-30 02:49:34,093 - root - ERROR - Error in token refresh middleware: 401: Could not validate credentials
2025-03-30 03:22:50,037 - asyncio - ERROR - Exception in callback _ProactorReadPipeTransport._loop_reading(<_OverlappedF...d result=1078>)
handle: <Handle _ProactorReadPipeTransport._loop_reading(<_OverlappedF...d result=1078>)>
Traceback (most recent call last):
  File "C:\Users\kentt\AppData\Local\Programs\Python\Python312\Lib\asyncio\events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\kentt\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 325, in _loop_reading
    self._data_received(data, length)
  File "C:\Users\kentt\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 274, in _data_received
    self._protocol.data_received(data)
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 172, in data_received
    self.handle_events()
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 181, in handle_events
    self.send_400_response(msg)
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 298, in send_400_response
    output = self.conn.send(event)
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\h11\_connection.py", line 512, in send
    data_list = self.send_with_data_passthrough(event)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\h11\_connection.py", line 537, in send_with_data_passthrough
    self._process_event(self.our_role, event)
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\h11\_connection.py", line 272, in _process_event
    self._cstate.process_event(role, type(event), server_switch_event)
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\h11\_state.py", line 293, in process_event
    self._fire_event_triggered_transitions(role, _event_type)
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\h11\_state.py", line 311, in _fire_event_triggered_transitions
    raise LocalProtocolError(
h11._util.LocalProtocolError: can't handle event type Response when role=SERVER and state=CLOSED
2025-03-31 01:12:15,842 - asyncio - ERROR - Exception in callback _ProactorReadPipeTransport._loop_reading(<_OverlappedF...ed result=957>)
handle: <Handle _ProactorReadPipeTransport._loop_reading(<_OverlappedF...ed result=957>)>
Traceback (most recent call last):
  File "C:\Users\kentt\AppData\Local\Programs\Python\Python312\Lib\asyncio\events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\kentt\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 325, in _loop_reading
    self._data_received(data, length)
  File "C:\Users\kentt\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 274, in _data_received
    self._protocol.data_received(data)
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 172, in data_received
    self.handle_events()
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 181, in handle_events
    self.send_400_response(msg)
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 298, in send_400_response
    output = self.conn.send(event)
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\h11\_connection.py", line 512, in send
    data_list = self.send_with_data_passthrough(event)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\h11\_connection.py", line 537, in send_with_data_passthrough
    self._process_event(self.our_role, event)
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\h11\_connection.py", line 272, in _process_event
    self._cstate.process_event(role, type(event), server_switch_event)
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\h11\_state.py", line 293, in process_event
    self._fire_event_triggered_transitions(role, _event_type)
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\h11\_state.py", line 311, in _fire_event_triggered_transitions
    raise LocalProtocolError(
h11._util.LocalProtocolError: can't handle event type Response when role=SERVER and state=CLOSED
2025-03-31 02:47:14,482 - asyncio - ERROR - Exception in callback _ProactorReadPipeTransport._loop_reading(<_OverlappedF...ed result=781>)
handle: <Handle _ProactorReadPipeTransport._loop_reading(<_OverlappedF...ed result=781>)>
Traceback (most recent call last):
  File "C:\Users\kentt\AppData\Local\Programs\Python\Python312\Lib\asyncio\events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\kentt\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 325, in _loop_reading
    self._data_received(data, length)
  File "C:\Users\kentt\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 274, in _data_received
    self._protocol.data_received(data)
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 172, in data_received
    self.handle_events()
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 181, in handle_events
    self.send_400_response(msg)
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 298, in send_400_response
    output = self.conn.send(event)
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\h11\_connection.py", line 512, in send
    data_list = self.send_with_data_passthrough(event)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\h11\_connection.py", line 537, in send_with_data_passthrough
    self._process_event(self.our_role, event)
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\h11\_connection.py", line 272, in _process_event
    self._cstate.process_event(role, type(event), server_switch_event)
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\h11\_state.py", line 293, in process_event
    self._fire_event_triggered_transitions(role, _event_type)
  File "C:\Users\kentt\OneDrive\Desktop\projects\MM\venv\Lib\site-packages\h11\_state.py", line 311, in _fire_event_triggered_transitions
    raise LocalProtocolError(
h11._util.LocalProtocolError: can't handle event type Response when role=SERVER and state=CLOSED
